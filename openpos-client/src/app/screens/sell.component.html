<div class="page-content" fxLayout="row" fxLayoutAlign="start stretch">
	<div class="sale-trans-panel-container" fxFlex fxLayout="column" fxLayoutAlign="start" fxLayoutGap="16px">
		
		<mat-card fxFlex="0 0 auto" class="sale-trans-panel-title-bar" fxLayout="row" fxLayoutAlign="start center">
				<ng-container *ngIf="session.screen.transaction.transactionNumber">
					Transaction #{{session.screen.transaction.transactionNumber}}
				</ng-container>
				<ng-container *ngIf="!session.screen.transaction.transactionNumber">
					Transaction Not Started
				</ng-container>
					<span fxFlex></span>
				<ng-container *ngIf="session.screen && session.screen.menuActions && session.screen.menuActions.length > 0">
					<button mat-icon-button [matMenuTriggerFor]="menu">
						<mat-icon>more_vert</mat-icon>
					</button>
			
					<mat-menu #menu="matMenu">
						<button mat-menu-item *ngFor="let m of session.screen.menuActions" (click)="doMenuItemAction(m)" 
							[disabled]="!isMenuItemEnabled(m)">
							<app-icon *ngIf="m.icon" [iconName]="m.icon"></app-icon>
							<span [ngClass]="{'menu-item-dimmed': ! m.enabled}">{{m.title}}</span>
						</button>
					</mat-menu>
				</ng-container>
		</mat-card>

		<mat-card fxFlex="0 0 auto" class="prompt-input-container">
			<button mat-button class="scan-something-button">
				<span>Scan</span>
				<app-icon iconClass="material-icons scan-icon" iconName="local_barcode"></app-icon>
			</button>
			<input #box class="prompt-input-scan-something" 
				(keyup.enter)="onEnter(box.value)" [(ngModel)]="session.response" (keydown)="onBarcodeKeydown($event)" (paste)="onBarcodePaste($event)"
				placeholder="Scan something">
		</mat-card>

		<mat-card fxFlex="1 1 auto" class="sale-line-item-container serrated-edge"  fxLayout="column" fxLayoutAlign="start">
			<mat-card-content fxFlex="1 1 auto" class="scrollable" style="margin-bottom:0px">
					<mat-nav-list disableRipple=true>
						<app-product-list [items]="items" (itemClick)="onItemClick($event)"></app-product-list>
					</mat-nav-list>
					<div *ngIf="items.length == 0" class="sale-line-item-container-no-content" [style.sm]="{'font-size': '16px'}" [style.xs]="{'font-size': '16px'}"
					 fxLayout="column" fxLayoutAlign="center center">
						<svg style="width:180px;height:180px" viewBox="0 0 25 25">
							<path fill="#c8c8c8" d="M4,6H6V18H4V6M7,6H8V18H7V6M9,6H12V18H9V6M13,6H14V18H13V6M16,6H18V18H16V6M19,6H20V18H19V6M2,4V8H0V4A2,2 0 0,1 2,2H6V4H2M22,2A2,2 0 0,1 24,4V8H22V4H18V2H22M2,16V20H6V22H2A2,2 0 0,1 0,20V16H2M22,20V16H24V20A2,2 0 0,1 22,22H18V20H22Z"
							/>
						</svg>
						Scan something to get started.
					</div>
			</mat-card-content>
			<mat-card-content  class="lookup-customer-button" fxFlex="0 0 auto" fxAlign="end"  fxLayout="row" fxLayoutAlign="start center">
					<mat-icon color="primary" class="material-icons mat-48">person</mat-icon>
					<ng-container *ngIf="!session.screen.customer">&nbsp;Lookup&nbsp;Customer</ng-container>
					<ng-container *ngIf="session.screen.customer">{{session.screen.customer.name}}</ng-container>
					<span fxFlex></span>
					<button mat-button color="primary" (click)="session.onAction('LookupCustomer')" style="text-align:right">
						<mat-icon class="material-icons mat-48">keyboard_arrow_right</mat-icon>
					</button>
			</mat-card-content>
		</mat-card>

		<div *ngIf="session.screen.transaction.transactionNumber" fxFlex="0 0 auto" fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="16px">
			<mat-card fxFlex class="subtotals-container">
				<mat-card-title class="subtotals-label">
						Discounts
				</mat-card-title>
				<mat-card-content>
					<p class="subtotals-amount" [ngClass]="{'subtotals-amount-dimmed':items.length == 0}">
						<span class="super-currency-symbol">$</span>{{session.screen.discountTotal}}</p>
				</mat-card-content>
			</mat-card>
			<mat-card fxFlex class="subtotals-container">
				<mat-card-title class="subtotals-label">
						Tax
				</mat-card-title>
				<mat-card-content>
					<p class="subtotals-amount" [ngClass]="{'subtotals-amount-dimmed':items.length == 0}">
						<span class="super-currency-symbol">$</span>{{session.screen.taxTotal}}</p>
				</mat-card-content>
			</mat-card>
			<mat-card fxFlex class="subtotals-container">
				<mat-card-title class="subtotals-label">
						Subtotal
				</mat-card-title>
				<mat-card-content>
					<p class="subtotals-amount" [ngClass]="{'subtotals-amount-dimmed':items.length == 0}">
						<span class="super-currency-symbol">$</span>{{session.screen.subTotal}}</p>
				</mat-card-content>
			</mat-card>
		</div>

		<mat-card *ngIf="session.screen.transaction.transactionNumber" fxFlex="0 0 auto" class="sale-total-checkout-container" fxLayout="row" fxLayoutAlign="center center">
			Total
			<span fxFlex style="text-align: center">			
				<span class="super-currency-symbol">$</span>
				{{session.screen.grandTotal}}</span>
			<button mat-raised-button flexFill color="primary" style="height:100%" [disabled]="!session.screen.transaction.active || items.length == 0"
			(click)="session.onAction('Checkout')">
				<mat-icon class="material-icons mat-48">keyboard_arrow_right</mat-icon>
			</button>
		</mat-card>

	</div>

	<div class="sale-marketing-panel-container" fxFlex="40" fxHide.xs fxHide.sm>

	</div>

</div>