plugins {
	id "com.moowork.node" version "1.2.0"
}

apply from: "${openposDir}/openpos-client-core-lib/node.gradle"

node {
	workDir = file("${openposDir}/node")
	nodeModulesDir = file("./")
}

task npmClean(type: Delete) {
	delete "./node_modules"
	delete "./dist"
	delete "./coverage"
}
clean.dependsOn(npmClean)

task npmLink(type: NpmTask) {
  args = ['link', "openpos-core"]
}
npmLink.dependsOn(npm_install);
npmLink.dependsOn tasks.getByPath(':openpos-client-core-lib:link')

task build {}
build.dependsOn(npm_run_build)
npm_run_build.dependsOn(npmLink)

task develop {}
develop.dependsOn(npmLink)

task pack {}
npm_pack.dependsOn(build)
pack.dependsOn(npm_pack)

task check {}
check.dependsOn(npm_run_test)

task runAll{}
runAll.dependsOn(npm_run_start)

task assemble {}
assemble.dependsOn(build)
npm_install.dependsOn tasks.getByPath(':openpos-client-core-lib:link')