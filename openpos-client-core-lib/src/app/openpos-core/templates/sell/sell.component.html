<div fxFlexFill  style="background-color: white; padding:16px;overflow-y:auto" fxLayout="column" fxLayoutAlign="start" fxLayoutGap="16px">
    <app-scan-something class="mat-elevation-z3" *ngIf="session.screen.showScan" fxFlex="0 0 auto" (enter)="onScanInputEnter($event)" placeholderText="Scan Something"></app-scan-something>
    
    <mat-card fxFlex class="page-content-card min-height lighter" fxLayout="column" fxLayoutAlign="start">
	        <mat-card-title fxFlex="0 0 auto" class="text-md">
            <ng-container *ngIf="session.screen.transactionMenuItems?.length > 0; else prompt">
              <button mat-button class="text-md" style="padding-left:0px;" [matMenuTriggerFor]="transactionMenu">
                <span>{{session.screen.prompt}}</span>
                <mat-icon>expand_more</mat-icon></button>
              <mat-menu #transactionMenu="matMenu">
                  <button mat-menu-item *ngFor="let m of session.screen.transactionMenuItems" (click)="doMenuItemAction(m)" 
                  [disabled]="!isMenuItemEnabled(m)">
                  <app-icon *ngIf="m.icon" [iconName]="m.icon"></app-icon>
                  <span [ngClass]="{'muted-color': ! m.enabled}">{{m.title}}</span>
                </button>
              </mat-menu>
            </ng-container>
            <ng-template #prompt>
                <span fxFlexAlign="center">{{session.screen.prompt}}</span>
            </ng-template>

            <span fxFlex="1 1 auto"></span>
            <span *ngIf="session.screen && session.screen.localMenuItems && session.screen.localMenuItems.length">
              <button mat-icon-button (click)="drawer.toggle()">
                <mat-icon>menu</mat-icon>
              </button>
            </span>
          </mat-card-title>
          <mat-drawer-container fxFlex>
              <mat-drawer #drawer position="end" [mode]="drawerMode | async" [opened]="drawerOpen | async" fxLayout="column" fxLayoutAlign="start stretch" fxLayoutGap="4px" style="overflow-x:hidden">
                <button mat-button color="primary" *ngFor="let m of session.screen.localMenuItems"  (click)="doMenuItemAction(m)" style="text-align: left">
                    <app-icon *ngIf="m.icon" [iconName]="m.icon"></app-icon>
                    <span>&nbsp;{{m.title}}</span>
                </button>
                <div fxFlex></div>
                <button mat-button *ngIf="session.screen.type === 'Transaction'"  color="accent" style="text-align: left">
                    <ng-container *ngIf="session.screen.customer">
                        <mat-icon>person</mat-icon>&nbsp;
                        <span >{{session.screen.customer.name}}</span>
                    </ng-container>
                    <ng-container *ngIf="!session.screen.customer">
                        <mat-icon class="muted-color">link</mat-icon>&nbsp;
                        <span class="muted-color">No Linked Customer</span>
                    </ng-container>
                    
                </button>
              </mat-drawer>
              <mat-drawer-content>
                  <ng-template appScreen></ng-template>
              </mat-drawer-content>
            </mat-drawer-container>
      </mat-card>
</div>