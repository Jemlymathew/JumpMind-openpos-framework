<app-bacon-strip class="sale-bacon-strip">
    <div class="sale-outer">
        <div *ngIf="!(isMobile | async)" class="sale-header">
            <app-accent-button *ngIf="!screen.readOnly && !screen.linkedCustomerButton && screen.loyaltyButton"
                               [actionItem]="screen.loyaltyButton"
                               (actionClick)="doMenuItemAction(screen.loyaltyButton)"
                               (click)="doMenuItemAction(screen.loyaltyButton)"
                               class="link-customer">
                <span>Link customer to apply rewards!</span>
                <mat-icon class="material-icons line-item-caret" align="end">keyboard_arrow_right</mat-icon>
            </app-accent-button>
            <button *ngIf="!screen.readOnly && screen.linkedCustomerButton && screen.customer"
                    mat-flat-button
                    class="icon-button account-profile-button"
                    [disabled]="false"
                    [actionItem]="screen.linkedCustomerButton"
                    (actionClick)="doMenuItemAction(screen.linkedCustomerButton)"
                    (click)="doMenuItemAction(screen.linkedCustomerButton)">
                <app-icon [iconName]="'account_circle'" [iconClass]="(isMobile | async) ? null: 'material-icons mat-36'"></app-icon>
            </button>
            <button *ngIf="!screen.readOnly && screen.linkedCustomerButton && screen.customer"
                    class="linked-customer-summary"
                    fxFlex="1 0 auto"
                    responsive-class
                    mat-flat-button
                    [actionItem]="screen.linkedCustomerButton"
                    (actionClick)="doMenuItemAction(screen.linkedCustomerButton)"
                    (click)="doMenuItemAction(screen.linkedCustomerButton)">
                <span class="customer-name">{{screen.customer.name}}</span>
                <span>Loyalty ID: {{screen.customer.id}}</span>
                <mat-icon class="material-icons line-item-caret">keyboard_arrow_right</mat-icon>
            </button>
        </div>
        <div *ngIf="!(isMobile | async)" class="sale-body">
            <section class="orders" *ngIf="screen.orders && screen.orders.length > 0">
                <div class="orders-content">
                    <strong class="orders-label muted-color" responsiveClass>
                            {{screen.orders.length}} Linked Order(s)
                    </strong>
                    <div style="overflow-y: auto;">
                        <app-order-card *ngFor="let order of screen.orders"
                            class="order"
                            [order]="order"
                            [removeOrderAction]="removeOrderAction"
                            (click)="onOrderClick(order)">
                        </app-order-card>
                    </div>
                </div>
                <div class="vertical-divider grey-background"></div>
            </section>
            <div class="sale-items-outer">
                <app-scan-or-search class="scan-or-search mat-elevation-z1" [defaultAction]="screen.checkoutButton" [focusInitial]="false">
                </app-scan-or-search>

                <app-sale-item-card-list class="sale-list-background"></app-sale-item-card-list>

                <app-status-strip></app-status-strip>
            </div>
            <app-sale-total-panel></app-sale-total-panel>
        </div>
        <div *ngIf="(isMobile | async)" class="sale-body-mobile">
            <app-mobile-employee-part class="sale-employee-mobile"></app-mobile-employee-part>
            <app-mobile-loyalty-part class="sale-loyalty-mobile"></app-mobile-loyalty-part>
            <app-mobile-sale-item-list class="sale-list-background-mobile"></app-mobile-sale-item-list>
        </div>
        <app-mobile-totals-part *ngIf="(isMobile | async)"></app-mobile-totals-part>
        <div *ngIf="(isMobile | async) && screen.orders && screen.orders.length > 0" class="orders-mobile-swipe-up-container dark-background" (swipeup)="openSheet()" responsive-class>
            <strong class="orders-label-mobile contrast-color">
                <app-icon iconName="double_arrow" iconClass="double-arrow md"></app-icon>
                {{screen.orders.length}} Linked Order(s)
            </strong>
        </div>
    </div>
</app-bacon-strip>