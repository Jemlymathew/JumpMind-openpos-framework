<div class="transaction-prompt" fxLayoutAlign="start center">
    <div fxLayoutAlign="start center" *ngIf="selectedItems && selectedItems.length > 0; else transactionMenuElse" class="page-content-card">
        <mat-label class="selected-color">{{selectedItems.length}} Item{{selectedItems.length === 1 ? '' : 's'}}  Selected</mat-label>
         <app-kebab-button [keyBinding]="transactionMenu.keybind" *ngIf="!readOnly && selectedItems.length > 0" [menuItems]="multiSelectedMenuItems" [color]="'selected-color'"
            (menuItemClick)="onItemActionsMultiMenulick($event, selectedItemIndexes, selectedItems)"></app-kebab-button> 
        <span *ngIf="keybindsEnabled() && transactionMenu.keybind && !readOnly && selectedItems.length > 0 && multiSelectedMenuItems && multiSelectedMenuItems.length > 0" class="muted-color text-sm">{{transactionMenu.keybind}}</span>
    </div>
    <ng-template #transactionMenuElse>
        <span>{{prompt}}</span>
        <app-kebab-button *ngIf="transactionMenu.actionItems.length > 0" [keyBinding]="transactionMenu.keybind" [menuItems]="transactionMenu.actionItems" (menuItemClick)="onMenuItemClick($event)"></app-kebab-button>
        <span *ngIf="keybindsEnabled() && transactionMenu.actionItems.length > 0 && transactionMenu.keybind" class="muted-color text-sm">{{transactionMenu.keybind}}</span>
    </ng-template>
</div>

<mat-card fxFlex="0 1 100%" class="page-content-card scrollable-content-card serrated-edge" fxLayout="column"
    fxLayoutAlign="start">
    <mat-card-content fxFlex="100%" #scrollList ngClass.xs="xs">

        <app-selectable-item-list [configuration]="listConfig" [selectedItemList]="selectedItems"
            (selectedItemListChange)="onItemListChange($event)">
            <ng-template let-item>
                <div gdAreas="  description description giftReceipt cost kebab |
                                subtitle labels giftReceipt cost kebab |
                                prop65Item prop65Item prop65Item prop65Item prop65Item"
                     gdColumns="auto 1fr auto auto auto"
                     gdGap="4px"
                    [ngClass]="item.type" >
                    <div gdArea="description" [ngClass]="item.prop65Item ? 'warn' : ''">
                        {{item.description}}
                    </div>
                    <div gdArea="subtitle" class="muted-color">
                        {{item.subtitle}}
                    </div>
                    <div gdArea="labels">
                        <span class="item-label" *ngFor="let label of item.labels">{{label}}</span>
                    </div>
                    <div gdArea="prop65Item" *ngIf="item.prop65Item" class="muted-color">
                        <table>
                            <tr>
                                <td style="text-align: left; vertical-align: top; padding-right: 4px;">
                                    <div class="prop65Image"></div>
                                </td>
                                <td style="text-align: left; vertical-align: middle;">{{item.prop65WarningText}}</td>
                            </tr>
                        </table>
                    </div>
                    <div gdArea="giftReceipt" *ngIf="item.isGiftReceipt" fxAlign="right center">
                        <mat-icon color="muted-color">redeem</mat-icon>&nbsp;&nbsp;
                    </div>
                    <div gdArea="cost" gdGridAlign="center center" class="primary text-md">
                        <app-currency-text [amountText]="item.amount"></app-currency-text>
                        <div>
                            <p [hidden]="!item.discountAmount" class="muted-color text-xs" style="text-align: right; margin: 0px; text-decoration: line-through;">
                                <app-currency-text [amountText]="item.originalAmount"></app-currency-text>
                            </p>

                            <p [hidden]="!item.discountAmount" class="muted-color text-xs" style="text-align: right; margin: 0px;">
                                <app-currency-text [amountText]="item.discountAmount"></app-currency-text>
                            </p>
                        </div>
                    </div>
                    <div gdArea="kebab">
                        <app-kebab-button block-selection *ngIf="selectedItems.length < 1 && !readOnly; else hideButton" fxAlign="right"
                            [menuItems]="item.menuItems" (menuItemClick)="onMenuItemClick($event, [item.index])"></app-kebab-button>
                        <ng-template #hideButton>
                            <div style="height: 40px; width: 40px;"></div>
                        </ng-template>
                    </div>
                </div>
            </ng-template>
        </app-selectable-item-list>

        <div *ngIf="!listConfig.items || listConfig.items.length == 0" fxLayout="column" fxLayoutAlign="center center"
            class="muted-color">
            <mat-icon ngClass="material-icons mat-180" ngClass="material-icons mat-128" color=icon svgIcon="barcode"></mat-icon>
            <span class="text-md">Scan/Key something to get started</span>
        </div>

    </mat-card-content>
</mat-card>